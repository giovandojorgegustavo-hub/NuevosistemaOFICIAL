[2026-01-25 15:31:44] LOG FILE: CU2-003-20260125-153144-001.log
[2026-01-25 15:31:44] DB CONFIG: name=erpdb dsn=mysql://erpuser:Pepe1234++@tcp(127.0.0.1:3306)/erpdb
[2026-01-25 15:31:44] SERVER START: http://localhost:3000
[2026-01-25 15:31:48] ENDPOINT: GET /
[2026-01-25 15:31:48] ENDPOINT: GET /styles.css
[2026-01-25 15:31:48] ENDPOINT: GET /app.js
[2026-01-25 15:31:49] ENDPOINT: GET /api/bases
[2026-01-25 15:31:49] SQL: CALL get_bases()
[2026-01-25 15:31:49] ENDPOINT: GET /api/now
[2026-01-25 15:31:49] ENDPOINT: GET /api/productos
[2026-01-25 15:31:49] SQL: CALL get_productos()
[2026-01-25 15:31:49] ENDPOINT: GET /api/next-numdocumento
[2026-01-25 15:31:49] SQL: SELECT COALESCE(MAX(numdocumentostock), 0) + 1 AS next FROM movimiento_stock WHERE tipodocumentostock = ? | params=["AJU"]
[2026-01-25 15:31:49] ENDPOINT: GET /api/next-ordinal
[2026-01-25 15:31:49] SQL: SELECT COALESCE(MAX(ordinal), 0) + 1 AS next FROM detalle_movimiento_stock WHERE tipodocumentostock = ? AND numdocumentostock = ? | params=["AJU","1"]
[2026-01-25 15:32:03] ENDPOINT: GET /api/saldo
[2026-01-25 15:32:03] SQL: CALL get_saldo_stock(?, ?) | params=["1","1"]
[2026-01-25 15:32:03] ERROR: PROCEDURE erpdb.get_saldo_stock does not exist
[2026-01-25 15:35:37] ENDPOINT: GET /
[2026-01-25 15:35:37] ENDPOINT: GET /styles.css
[2026-01-25 15:35:37] ENDPOINT: GET /app.js
[2026-01-25 15:35:37] ENDPOINT: GET /api/bases
[2026-01-25 15:35:37] SQL: CALL get_bases()
[2026-01-25 15:35:37] ENDPOINT: GET /api/now
[2026-01-25 15:35:37] ENDPOINT: GET /api/productos
[2026-01-25 15:35:37] ENDPOINT: GET /api/next-numdocumento
[2026-01-25 15:35:37] SQL: CALL get_productos()
[2026-01-25 15:35:37] SQL: SELECT COALESCE(MAX(numdocumentostock), 0) + 1 AS next FROM movimiento_stock WHERE tipodocumentostock = ? | params=["AJU"]
[2026-01-25 15:35:38] ENDPOINT: GET /api/next-ordinal
[2026-01-25 15:35:38] SQL: SELECT COALESCE(MAX(ordinal), 0) + 1 AS next FROM detalle_movimiento_stock WHERE tipodocumentostock = ? AND numdocumentostock = ? | params=["AJU","1"]
[2026-01-25 15:35:41] ENDPOINT: GET /api/saldo
[2026-01-25 15:35:41] SQL: CALL get_saldo_stock(?, ?) | params=["1","1"]
[2026-01-25 15:35:46] ENDPOINT: GET /api/saldo
[2026-01-25 15:35:46] SQL: CALL get_saldo_stock(?, ?) | params=["1","2"]
[2026-01-25 15:36:25] ENDPOINT: GET /api/logs/latest
[2026-01-25 15:36:43] ENDPOINT: GET /styles.css
[2026-01-25 15:36:54] ENDPOINT: POST /api/ajuste
[2026-01-25 15:36:54] SQL: BEGIN TRANSACTION
[2026-01-25 15:36:54] SQL: INSERT INTO movimiento_stock
      (tipodocumentostock, numdocumentostock, fecha, codigo_base)
      VALUES (?, ?, ?, ?) | params=["AJU","1","2026-01-25","1"]
[2026-01-25 15:36:54] SQL: SELECT COALESCE(MAX(ordinal), 0) + 1 AS next FROM detalle_movimiento_stock WHERE tipodocumentostock = ? AND numdocumentostock = ? | params=["AJU","1"]
[2026-01-25 15:36:54] SQL: INSERT INTO detalle_movimiento_stock
      (ordinal, tipodocumentostock, numdocumentostock, codigo_producto, cantidad)
      VALUES (?, ?, ?, ?, ?) | params=["1","AJU","1","2","50.00"]
[2026-01-25 15:36:54] SQL: CALL get_actualizarsaldosstockaju(?, ?) | params=["AJU","1"]
[2026-01-25 15:36:54] SQL: COMMIT
[2026-01-25 15:40:01] ENDPOINT: GET /
[2026-01-25 15:40:02] ENDPOINT: GET /app.js
[2026-01-25 15:40:02] ENDPOINT: GET /styles.css
[2026-01-25 15:40:02] ENDPOINT: GET /api/now
[2026-01-25 15:40:02] ENDPOINT: GET /api/bases
[2026-01-25 15:40:02] SQL: CALL get_bases()
[2026-01-25 15:40:02] ENDPOINT: GET /api/productos
[2026-01-25 15:40:02] SQL: CALL get_productos()
[2026-01-25 15:40:02] ENDPOINT: GET /api/next-numdocumento
[2026-01-25 15:40:02] SQL: SELECT COALESCE(MAX(numdocumentostock), 0) + 1 AS next FROM movimiento_stock WHERE tipodocumentostock = ? | params=["AJU"]
[2026-01-25 15:40:02] ENDPOINT: GET /api/next-ordinal
[2026-01-25 15:40:02] SQL: SELECT COALESCE(MAX(ordinal), 0) + 1 AS next FROM detalle_movimiento_stock WHERE tipodocumentostock = ? AND numdocumentostock = ? | params=["AJU","2"]
[2026-01-25 15:40:08] ENDPOINT: GET /api/saldo
[2026-01-25 15:40:08] SQL: CALL get_saldo_stock(?, ?) | params=["1","1"]
[2026-01-25 15:40:18] ENDPOINT: POST /api/ajuste
[2026-01-25 15:40:18] SQL: BEGIN TRANSACTION
[2026-01-25 15:40:18] SQL: INSERT INTO movimiento_stock
      (tipodocumentostock, numdocumentostock, fecha, codigo_base)
      VALUES (?, ?, ?, ?) | params=["AJU","2","2026-01-25","1"]
[2026-01-25 15:40:18] SQL: SELECT COALESCE(MAX(ordinal), 0) + 1 AS next FROM detalle_movimiento_stock WHERE tipodocumentostock = ? AND numdocumentostock = ? | params=["AJU","2"]
[2026-01-25 15:40:18] SQL: INSERT INTO detalle_movimiento_stock
      (ordinal, tipodocumentostock, numdocumentostock, codigo_producto, cantidad)
      VALUES (?, ?, ?, ?, ?) | params=["1","AJU","2","1","-60.00"]
[2026-01-25 15:40:18] SQL: CALL get_actualizarsaldosstockaju(?, ?) | params=["AJU","2"]
[2026-01-25 15:40:18] SQL: COMMIT

[2026-01-26 16:40:08] LOG FILE: CU2-005-20260126-164008-001.log
[2026-01-26 16:40:08] DB CONFIG: name=erpdb dsn=mysql://erpuser:Pepe1234++@tcp(127.0.0.1:3306)/erpdb
[2026-01-26 16:40:09] SERVER START: http://localhost:3000
[2026-01-26 16:40:19] ENDPOINT: GET /favicon.ico
[2026-01-26 16:40:23] ENDPOINT: GET /
[2026-01-26 16:40:23] ENDPOINT: GET /styles.css
[2026-01-26 16:40:23] ENDPOINT: GET /app.js
[2026-01-26 16:40:23] ENDPOINT: GET /api/now
[2026-01-26 16:40:23] ENDPOINT: GET /api/bases
[2026-01-26 16:40:23] SQL: CALL get_bases()
[2026-01-26 16:40:23] ENDPOINT: GET /api/cuentasbancarias
[2026-01-26 16:40:23] ENDPOINT: GET /api/productos
[2026-01-26 16:40:23] SQL: CALL get_cuentasbancarias()
[2026-01-26 16:40:23] SQL: CALL get_productos()
[2026-01-26 16:40:23] ENDPOINT: GET /api/next-numdocumentostock
[2026-01-26 16:40:23] ENDPOINT: GET /api/etiquetas-gastos
[2026-01-26 16:40:23] ENDPOINT: GET /api/next-numdocumentostock
[2026-01-26 16:40:23] SQL: SELECT COALESCE(MAX(numdocumentostock), 0) + 1 AS next FROM movimiento_stock WHERE tipodocumentostock = ? | params=["FPR"]
[2026-01-26 16:40:23] SQL: CALL get_etiquetas_gastos()
[2026-01-26 16:40:23] SQL: SELECT COALESCE(MAX(numdocumentostock), 0) + 1 AS next FROM movimiento_stock WHERE tipodocumentostock = ? | params=["FIS"]
[2026-01-26 16:41:21] ENDPOINT: POST /api/fabricacion
[2026-01-26 16:41:21] SQL: BEGIN TRANSACTION
[2026-01-26 16:41:21] SQL: SELECT COALESCE(MAX(numdocumentostock), 0) + 1 AS next FROM movimiento_stock WHERE tipodocumentostock = ? | params=["FIS"]
[2026-01-26 16:41:21] SQL: SELECT COALESCE(MAX(numdocumentostock), 0) + 1 AS next FROM movimiento_stock WHERE tipodocumentostock = ? | params=["FPR"]
[2026-01-26 16:41:21] SQL: INSERT INTO movimiento_stock (tipodocumentostock, numdocumentostock, fecha, codigo_base) VALUES (?, ?, ?, ?) | params=["FIS",1,"2026-01-26","1"]
[2026-01-26 16:41:21] SQL: SELECT COALESCE(MAX(ordinal), 0) + 1 AS next FROM detalle_movimiento_stock WHERE tipodocumentostock = ? AND numdocumentostock = ? | params=["FIS",1]
[2026-01-26 16:41:21] SQL: INSERT INTO detalle_movimiento_stock (ordinal, tipodocumentostock, numdocumentostock, codigo_producto, cantidad) VALUES (?, ?, ?, ?, ?) | params=[1,"FIS",1,"1",10]
[2026-01-26 16:41:21] SQL: INSERT INTO detalle_movimiento_stock (ordinal, tipodocumentostock, numdocumentostock, codigo_producto, cantidad) VALUES (?, ?, ?, ?, ?) | params=[2,"FIS",1,"2",10]
[2026-01-26 16:41:21] SQL: INSERT INTO movimiento_stock (tipodocumentostock, numdocumentostock, fecha, codigo_base) VALUES (?, ?, ?, ?) | params=["FPR",1,"2026-01-26","1"]
[2026-01-26 16:41:21] SQL: SELECT COALESCE(MAX(ordinal), 0) + 1 AS next FROM detalle_movimiento_stock WHERE tipodocumentostock = ? AND numdocumentostock = ? | params=["FPR",1]
[2026-01-26 16:41:21] SQL: INSERT INTO detalle_movimiento_stock (ordinal, tipodocumentostock, numdocumentostock, codigo_producto, cantidad) VALUES (?, ?, ?, ?, ?) | params=[1,"FPR",1,"3",20]
[2026-01-26 16:41:21] SQL: SELECT COALESCE(MAX(numdocumento), 0) + 1 AS next FROM mov_contable_gasto WHERE tipodocumento = ? | params=["GAS"]
[2026-01-26 16:41:21] SQL: INSERT INTO mov_contable_gasto (tipodocumento, numdocumento, fecha, descripcion, monto, codigo_cuentabancaria) VALUES (?, ?, ?, ?, ?, ?) | params=["GAS",1,"2026-01-26","taxi",50,"1002"]
[2026-01-26 16:41:21] SQL: SELECT COALESCE(MAX(ordinal), 0) + 1 AS next FROM mov_contable_gasto_detalle WHERE tipodocumento = ? AND numdocumento = ? | params=["GAS",1]
[2026-01-26 16:41:21] SQL: INSERT INTO mov_contable_gasto_detalle (tipodocumento, numdocumento, ordinal, codigoetiquetagasto) VALUES (?, ?, ?, ?) | params=["GAS",1,1,"1"]
[2026-01-26 16:41:21] SQL: SELECT COALESCE(MAX(ordinal), 0) + 1 AS next FROM fabricaciongastos WHERE tipodocumentostock = ? AND numdocumentostock = ? AND tipodocumentogasto = ? AND numdocumentogasto = ? | params=["FPR",1,"GAS",1]
[2026-01-26 16:41:21] SQL: INSERT INTO fabricaciongastos (tipodocumentostock, numdocumentostock, tipodocumentogasto, numdocumentogasto, ordinal) VALUES (?, ?, ?, ?, ?) | params=["FPR",1,"GAS",1,1]
[2026-01-26 16:41:21] SQL: CALL aplicar_gasto_bancario(?, ?) | params=["GAS",1]
[2026-01-26 16:41:21] SQL: INSERT INTO mov_contable_gasto (tipodocumento, numdocumento, fecha, descripcion, monto, codigo_cuentabancaria) VALUES (?, ?, ?, ?, ?, ?) | params=["GAS",2,"2026-01-26","taxi vuelta",50,"1001"]
[2026-01-26 16:41:21] SQL: SELECT COALESCE(MAX(ordinal), 0) + 1 AS next FROM mov_contable_gasto_detalle WHERE tipodocumento = ? AND numdocumento = ? | params=["GAS",2]
[2026-01-26 16:41:21] SQL: INSERT INTO mov_contable_gasto_detalle (tipodocumento, numdocumento, ordinal, codigoetiquetagasto) VALUES (?, ?, ?, ?) | params=["GAS",2,1,"1"]
[2026-01-26 16:41:21] SQL: SELECT COALESCE(MAX(ordinal), 0) + 1 AS next FROM fabricaciongastos WHERE tipodocumentostock = ? AND numdocumentostock = ? AND tipodocumentogasto = ? AND numdocumentogasto = ? | params=["FPR",1,"GAS",2]
[2026-01-26 16:41:21] SQL: INSERT INTO fabricaciongastos (tipodocumentostock, numdocumentostock, tipodocumentogasto, numdocumentogasto, ordinal) VALUES (?, ?, ?, ?, ?) | params=["FPR",1,"GAS",2,1]
[2026-01-26 16:41:21] SQL: CALL aplicar_gasto_bancario(?, ?) | params=["GAS",2]
[2026-01-26 16:41:21] SQL: INSERT INTO mov_contable_gasto (tipodocumento, numdocumento, fecha, descripcion, monto, codigo_cuentabancaria) VALUES (?, ?, ?, ?, ?, ?) | params=["GAS",3,"2026-01-26","almuerzo",50,"1001"]
[2026-01-26 16:41:21] SQL: SELECT COALESCE(MAX(ordinal), 0) + 1 AS next FROM mov_contable_gasto_detalle WHERE tipodocumento = ? AND numdocumento = ? | params=["GAS",3]
[2026-01-26 16:41:21] SQL: INSERT INTO mov_contable_gasto_detalle (tipodocumento, numdocumento, ordinal, codigoetiquetagasto) VALUES (?, ?, ?, ?) | params=["GAS",3,1,"1"]
[2026-01-26 16:41:21] SQL: SELECT COALESCE(MAX(ordinal), 0) + 1 AS next FROM fabricaciongastos WHERE tipodocumentostock = ? AND numdocumentostock = ? AND tipodocumentogasto = ? AND numdocumentogasto = ? | params=["FPR",1,"GAS",3]
[2026-01-26 16:41:21] SQL: INSERT INTO fabricaciongastos (tipodocumentostock, numdocumentostock, tipodocumentogasto, numdocumentogasto, ordinal) VALUES (?, ?, ?, ?, ?) | params=["FPR",1,"GAS",3,1]
[2026-01-26 16:41:21] SQL: CALL aplicar_gasto_bancario(?, ?) | params=["GAS",3]
[2026-01-26 16:41:21] SQL: CALL get_actualizarsaldosstockfis(?, ?) | params=["FIS",1]
[2026-01-26 16:41:21] SQL: CALL get_actualizarsaldosstockfpr(?, ?) | params=["FPR",1]
[2026-01-26 16:41:21] SQL: COMMIT
[2026-01-26 16:41:21] ENDPOINT: GET /api/now
[2026-01-26 16:41:21] ENDPOINT: GET /api/bases
[2026-01-26 16:41:21] SQL: CALL get_bases()
[2026-01-26 16:41:21] ENDPOINT: GET /api/next-numdocumentostock
[2026-01-26 16:41:21] ENDPOINT: GET /api/cuentasbancarias
[2026-01-26 16:41:21] ENDPOINT: GET /api/productos
[2026-01-26 16:41:21] ENDPOINT: GET /api/next-numdocumentostock
[2026-01-26 16:41:21] ENDPOINT: GET /api/etiquetas-gastos
[2026-01-26 16:41:21] SQL: SELECT COALESCE(MAX(numdocumentostock), 0) + 1 AS next FROM movimiento_stock WHERE tipodocumentostock = ? | params=["FPR"]
[2026-01-26 16:41:21] SQL: CALL get_cuentasbancarias()
[2026-01-26 16:41:21] SQL: CALL get_productos()
[2026-01-26 16:41:21] SQL: SELECT COALESCE(MAX(numdocumentostock), 0) + 1 AS next FROM movimiento_stock WHERE tipodocumentostock = ? | params=["FIS"]
[2026-01-26 16:41:21] SQL: CALL get_etiquetas_gastos()
[2026-01-26 17:04:09] ENDPOINT: POST /

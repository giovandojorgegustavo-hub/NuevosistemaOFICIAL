[2026-01-25 12:34:25] LOG FILE: CU-001-20260125-123425-001.log
[2026-01-25 12:34:25] DB CONFIG: name=erpdb dsn=mysql://erpuser:Pepe1234%2B%2B@127.0.0.1:3306/erpdb
[2026-01-25 12:34:25] SERVER STARTED: http://localhost:3000
[2026-01-25 12:34:30] ENDPOINT: GET /
[2026-01-25 12:34:30] ENDPOINT: GET /styles.css
[2026-01-25 12:34:30] ENDPOINT: GET /app.js
[2026-01-25 12:34:30] ENDPOINT: GET /api/now
[2026-01-25 12:34:30] ENDPOINT: GET /api/clientes
[2026-01-25 12:34:30] SQL: CALL get_clientes()
[2026-01-25 12:34:30] ENDPOINT: GET /api/productos
[2026-01-25 12:34:30] SQL: CALL get_productos()
[2026-01-25 12:34:30] ENDPOINT: GET /api/bases
[2026-01-25 12:34:30] SQL: CALL get_bases()
[2026-01-25 12:34:30] ENDPOINT: GET /api/next/codigo-pedido
[2026-01-25 12:34:30] SQL: SELECT COALESCE(MAX(codigo_pedido), 0) + 1 AS next FROM pedidos
[2026-01-25 12:34:30] ENDPOINT: GET /api/next/numero-documento
[2026-01-25 12:34:30] SQL: SELECT COALESCE(MAX(numero_documento), 0) + 1 AS next FROM mov_contable WHERE tipo_documento = ? | params=["FAC"]
[2026-01-25 12:34:30] ENDPOINT: GET /api/ubigeo/departamentos
[2026-01-25 12:34:30] SQL: CALL get_ubigeo_departamentos()
[2026-01-25 12:34:41] ENDPOINT: GET /api/puntos-entrega
[2026-01-25 12:34:41] SQL: CALL get_puntos_entrega(?) | params=["1"]
[2026-01-25 12:34:41] ENDPOINT: GET /api/numrecibe
[2026-01-25 12:34:41] SQL: CALL get_numrecibe(?) | params=["1"]
[2026-01-25 12:35:10] ENDPOINT: POST /api/emitir-factura
[2026-01-25 12:35:10] SQL: INSERT INTO pedidos (codigo_pedido, codigo_cliente, fecha) VALUES (?, ?, ?) | params=["1","1","2026-01-25 12:34:30"]
[2026-01-25 12:35:10] SQL: SELECT COALESCE(MAX(ordinal), 0) + 1 AS next FROM pedido_detalle WHERE codigo_pedido = ? | params=["1"]
[2026-01-25 12:35:10] SQL: INSERT INTO pedido_detalle
            (codigo_pedido, ordinal, codigo_producto, cantidad, precio_total, saldo, precio_unitario)
            VALUES (?, ?, ?, ?, ?, ?, ?) | params=["1","1","1",5,29,5,5.8]
[2026-01-25 12:35:10] SQL: SELECT COALESCE(MAX(ordinal_numrecibe), 0) + 1 AS next FROM numrecibe WHERE codigo_cliente_numrecibe = ? | params=["1"]
[2026-01-25 12:35:10] SQL: INSERT INTO numrecibe
            (ordinal_numrecibe, numero, nombre, codigo_cliente_numrecibe, concatenarnumrecibe)
            VALUES (?, ?, ?, ?, ?) | params=["2","34621342163121","asdgasdgasd","1","34621342163121 | asdgasdgasd"]
[2026-01-25 12:35:10] SQL: SELECT COALESCE(MAX(ordinal), 0) + 1 AS next FROM mov_contable_detalle WHERE tipo_documento = ? AND numero_documento = ? | params=["FAC","1"]
[2026-01-25 12:35:10] SQL: INSERT INTO mov_contable
          (codigo_pedido, fecha_emision, fecha_vencimiento, fecha_valor, codigo_cliente, saldo, tipo_documento, numero_documento, codigo_base,
           codigo_cliente_numrecibe, ordinal_numrecibe, codigo_cliente_puntoentrega, codigo_puntoentrega)
          VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) | params=["1","2026-01-25 12:34:30","2026-01-25 12:34:30","2026-01-25 12:34:30","1",17.4,"FAC","1","2","1","2","1","2"]
[2026-01-25 12:35:10] SQL: INSERT INTO mov_contable_detalle
            (tipo_documento, numero_documento, ordinal, codigo_producto, cantidad, saldo, precio_total)
            VALUES (?, ?, ?, ?, ?, ?, ?) | params=["FAC","1","1","1",3,3,17.4]
[2026-01-25 12:35:10] SQL: INSERT INTO paquete (codigo_paquete, tipo_documento, estado) VALUES (?, ?, ?) | params=["1","FAC","pendiente empacar"]
[2026-01-25 12:35:10] SQL: SELECT COALESCE(MAX(ordinal), 0) + 1 AS next FROM paquetedetalle WHERE codigo_paquete = ? AND tipo_documento = ? | params=["1","FAC"]
[2026-01-25 12:35:10] SQL: INSERT INTO paquetedetalle (codigo_paquete, tipo_documento, ordinal, estado) VALUES (?, ?, ?, ?) | params=["1","FAC","1","pendiente empacar"]
[2026-01-25 12:35:10] SQL: CALL actualizarsaldosclientes(?, ?, ?) | params=["1","FAC",17.4]
[2026-01-25 12:35:10] SQL: CALL salidaspedidos(?, ?) | params=["FAC","1"]
[2026-01-25 12:35:11] ENDPOINT: GET /api/now
[2026-01-25 12:35:11] ENDPOINT: GET /api/clientes
[2026-01-25 12:35:11] SQL: CALL get_clientes()
[2026-01-25 12:35:11] ENDPOINT: GET /api/productos
[2026-01-25 12:35:11] SQL: CALL get_productos()
[2026-01-25 12:35:11] ENDPOINT: GET /api/bases
[2026-01-25 12:35:11] SQL: CALL get_bases()
[2026-01-25 12:35:11] ENDPOINT: GET /api/next/codigo-pedido
[2026-01-25 12:35:11] SQL: SELECT COALESCE(MAX(codigo_pedido), 0) + 1 AS next FROM pedidos
[2026-01-25 12:35:11] ENDPOINT: GET /api/next/numero-documento
[2026-01-25 12:35:11] SQL: SELECT COALESCE(MAX(numero_documento), 0) + 1 AS next FROM mov_contable WHERE tipo_documento = ? | params=["FAC"]
[2026-01-25 12:35:11] ENDPOINT: GET /api/ubigeo/departamentos
[2026-01-25 12:35:11] SQL: CALL get_ubigeo_departamentos()

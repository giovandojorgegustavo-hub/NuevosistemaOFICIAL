<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>ERP | CU008 Anular Facturas</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <main class="app-shell">
      <header class="app-header">
        <div class="brand">
          <div class="brand-mark">CU008</div>
          <div>
            <div class="brand-title" data-i18n="brandTitle">Anular Facturas</div>
            <div class="brand-subtitle" data-i18n="brandSubtitle">Global IaaS + PaaS Billing Control</div>
          </div>
        </div>
        <span id="connectionBadge" class="badge rounded-pill text-bg-secondary" data-i18n="statusConnecting">
          Conectando
        </span>
      </header>

      <section class="wizard-card">
        <div class="wizard-header">
          <div>
            <div class="section-title" data-i18n="wizardTitle">CU008 - Anular Facturas</div>
            <div class="section-subtitle" data-i18n="wizardSubtitle">
              Flujo transaccional para anular facturas FAC y devolver inventario
            </div>
          </div>
          <div class="wizard-meta">
            <div>
              <div class="meta-label" data-i18n="metaDocType">Tipo</div>
              <div class="meta-value">FAC</div>
            </div>
            <div>
              <div class="meta-label" data-i18n="metaDocState">Accion</div>
              <div class="meta-value" data-i18n="metaDocStateValue">ANULAR</div>
            </div>
          </div>
        </div>

        <div class="progress" role="progressbar" aria-label="wizard progress">
          <div id="wizardProgress" class="progress-bar" style="width: 33%"></div>
        </div>

        <div class="steps">
          <button type="button" class="step-chip active" data-step="1">1</button>
          <button type="button" class="step-chip" data-step="2">2</button>
          <button type="button" class="step-chip" data-step="3">3</button>
        </div>

        <div id="alertArea" class="alert d-none" role="alert"></div>

        <form id="wizardForm" novalidate>
          <section class="step-view" data-step="1">
            <div class="row g-4">
              <div class="col-md-4">
                <label class="form-label" for="fecha_emision" data-i18n="labelFechaEmision">Fecha emision</label>
                <input id="fecha_emision" class="form-control" type="date" required />
              </div>

              <div class="col-md-8">
                <label class="form-label" for="nombre_cliente" data-i18n="labelCliente">Cliente</label>
                <div class="typeahead">
                  <input
                    id="nombre_cliente"
                    class="form-control"
                    type="text"
                    autocomplete="off"
                    placeholder="Buscar cliente..."
                    data-i18n-placeholder="phCliente"
                    required
                  />
                  <input id="codigo_cliente" type="hidden" />
                  <div id="clienteMenu" class="typeahead-menu"></div>
                </div>
                <div id="clienteSelected" class="field-hint">-</div>
              </div>

              <div class="col-md-6">
                <label class="form-label" for="codigo_paquete" data-i18n="labelFactura">Numero factura (paquete)</label>
                <div class="typeahead">
                  <input
                    id="codigo_paquete"
                    class="form-control"
                    type="text"
                    autocomplete="off"
                    placeholder="Buscar factura..."
                    data-i18n-placeholder="phFactura"
                    required
                  />
                  <div id="paqueteMenu" class="typeahead-menu"></div>
                </div>
                <div id="paqueteSelected" class="field-hint">-</div>
              </div>

              <div class="col-md-6">
                <label class="form-label" for="fecha_actualizado" data-i18n="labelFechaActualizado">Fecha actualizado</label>
                <input id="fecha_actualizado" class="form-control" type="text" readonly />
              </div>
              <div class="col-md-6">
                <label class="form-label" for="fecha_factura" data-i18n="labelFechaFactura">Fecha factura</label>
                <input id="fecha_factura" class="form-control" type="text" readonly />
              </div>
              <div class="col-md-6">
                <label class="form-label" for="lugar_entrega" data-i18n="labelLugarEntrega">Lugar entrega</label>
                <input id="lugar_entrega" class="form-control" type="text" readonly />
              </div>

              <div class="col-md-4">
                <label class="form-label" for="codigo_base" data-i18n="labelCodigoBase">Codigo base</label>
                <input id="codigo_base" class="form-control" type="text" readonly />
              </div>

              <div class="col-md-4">
                <label class="form-label" for="nombre_base" data-i18n="labelNombreBase">Nombre base</label>
                <input id="nombre_base" class="form-control" type="text" readonly />
              </div>

              <div class="col-md-4">
                <label class="form-label" for="region_entrega" data-i18n="labelRegionEntrega">Region entrega</label>
                <input id="region_entrega" class="form-control" type="text" readonly />
              </div>

              <div class="col-md-6">
                <label class="form-label" for="codigo_packing" data-i18n="labelCodigoPacking">Codigo packing</label>
                <input id="codigo_packing" class="form-control" type="text" readonly />
              </div>

              <div class="col-md-6">
                <label class="form-label" for="nombre_packing" data-i18n="labelNombrePacking">Nombre packing</label>
                <input id="nombre_packing" class="form-control" type="text" readonly />
              </div>
              <div class="col-12">
                <div id="mapSection" class="map-section d-none">
                  <div class="map-head">
                    <span class="map-title" data-i18n="labelMapa">Direccion y mapa</span>
                    <span class="badge text-bg-info" id="mapBadge">LIMA</span>
                  </div>
                  <div id="map" class="map-box"></div>
                </div>
                <div id="mapPlaceholder" class="map-placeholder">
                  <span data-i18n="mapOnlyLima">Mapa solo disponible para region LIMA.</span>
                </div>
              </div>
            </div>
          </section>

          <section class="step-view d-none" data-step="2">
            <div class="step-note" data-i18n="step2Note">Detalle de factura en modo solo lectura</div>
            <div class="table-responsive">
              <table class="table table-dark table-borderless align-middle">
                <thead>
                  <tr>
                    <th class="text-center" data-i18n="thOrdinal">#</th>
                    <th data-i18n="thProducto">Producto</th>
                    <th class="text-end" data-i18n="thCantidad">Cantidad</th>
                    <th class="text-end" data-i18n="thSaldo">Saldo</th>
                    <th class="text-end" data-i18n="thPrecioUnitario">Precio unitario</th>
                    <th class="text-end" data-i18n="thPrecioTotal">Precio total</th>
                  </tr>
                </thead>
                <tbody id="detalleGrid"></tbody>
              </table>
            </div>
            <div class="totals-bar">
              <span data-i18n="labelTotalFactura">Total factura</span>
              <strong id="totalFactura">0.00</strong>
            </div>
          </section>

          <section class="step-view d-none" data-step="3">
            <div class="summary-grid">
              <div class="summary-card">
                <div class="summary-title" data-i18n="summaryHeader">Resumen cabecera</div>
                <div class="summary-line"><span data-i18n="summaryCliente">Cliente</span><span id="resCliente">-</span></div>
                <div class="summary-line"><span data-i18n="summaryFactura">Factura</span><span id="resFactura">-</span></div>
                <div class="summary-line"><span data-i18n="summaryFecha">Fecha emision</span><span id="resFecha">-</span></div>
                <div class="summary-line"><span data-i18n="summaryFechaFactura">Fecha factura</span><span id="resFechaFactura">-</span></div>
                <div class="summary-line"><span data-i18n="summaryLugar">Lugar</span><span id="resLugar">-</span></div>
                <div class="summary-line"><span data-i18n="summaryBase">Base</span><span id="resBase">-</span></div>
                <div class="summary-line"><span data-i18n="summaryPacking">Packing</span><span id="resPacking">-</span></div>
              </div>

              <div class="summary-card">
                <div class="summary-title" data-i18n="summaryTotals">Totales</div>
                <div class="summary-line"><span data-i18n="summaryItems">Items</span><span id="resItems">0</span></div>
                <div class="summary-line"><span data-i18n="summaryTotalFactura">Total factura</span><span id="resTotalFactura">0.00</span></div>
              </div>
            </div>

            <div class="table-responsive mt-3">
              <table class="table table-dark table-borderless align-middle">
                <thead>
                  <tr>
                    <th class="text-center" data-i18n="thOrdinal">#</th>
                    <th data-i18n="thProducto">Producto</th>
                    <th class="text-end" data-i18n="thCantidad">Cantidad</th>
                    <th class="text-end" data-i18n="thPrecioTotal">Precio total</th>
                  </tr>
                </thead>
                <tbody id="resDetalle"></tbody>
              </table>
            </div>

            <div class="form-check confirm-box">
              <input id="confirmCheck" class="form-check-input" type="checkbox" />
              <label class="form-check-label" for="confirmCheck" data-i18n="confirmLabel">
                Confirmo que deseo anular la factura seleccionada.
              </label>
            </div>
          </section>

          <div class="wizard-actions">
            <button id="prevBtn" type="button" class="btn btn-outline-light" data-i18n="prev">Anterior</button>
            <button id="nextBtn" type="button" class="btn btn-primary" data-i18n="next">Siguiente</button>
            <button id="anularBtn" type="button" class="btn btn-danger d-none" data-i18n="anular">Anular Factura</button>
          </div>
        </form>
      </section>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="app.js"></script>
  </body>
</html>

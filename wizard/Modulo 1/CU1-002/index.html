<!DOCTYPE html>
<html lang="">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CU002 - Reasignar Base</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <main class="wizard-shell">
    <header class="wizard-header">
      <div>
        <p class="eyebrow" data-i18n="eyebrow">Global IaaS & PaaS Operations</p>
        <h1 data-i18n="title">Reassign Base</h1>
        <p class="subtitle" data-i18n="subtitle">Move pending packages to a new operational base with full auditability.</p>
      </div>
      <div class="status-pill">
        <span class="status-dot"></span>
        <span data-i18n="status">Online</span>
      </div>
    </header>

    <section class="progress-card">
      <div class="progress" role="progressbar" aria-valuemin="0" aria-valuemax="100">
        <div id="progressBar" class="progress-bar" style="width: 33%"></div>
      </div>
      <div class="step-labels">
        <span class="step-label active" data-step-label="1" data-i18n="step1">Select Pending Package</span>
        <span class="step-label" data-step-label="2" data-i18n="step2">Document Detail + New Base</span>
        <span class="step-label" data-step-label="3" data-i18n="step3">Confirm Reassignment</span>
      </div>
    </section>

    <section id="alertArea"></section>

    <section class="card-panel" data-step="1">
      <div class="card-header">
        <h2 data-i18n="step1_title">Paquetes Pendientes</h2>
        <p data-i18n="step1_desc">Selecciona un paquete para continuar.</p>
      </div>
      <div class="table-responsive">
        <table class="table table-hover align-middle" id="paquetesTable">
          <thead>
            <tr>
              <th data-i18n="codigo_paquete">Código</th>
              <th data-i18n="fecha_actualizado">Fecha</th>
              <th data-i18n="nombre_cliente">Cliente</th>
              <th data-i18n="num_cliente">Número</th>
              <th data-i18n="codigo_base">Base</th>
              <th data-i18n="packing">Packing</th>
              <th data-i18n="concatenarpuntoentrega">Punto Entrega</th>
              <th data-i18n="concatenarnumrecibe">Recibe</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
      <div class="d-flex justify-content-end mt-3">
        <button class="btn btn-primary" id="step1Next" disabled data-i18n="next">Siguiente</button>
      </div>
    </section>

    <section class="card-panel" data-step="2" hidden>
      <div class="card-header">
        <h2 data-i18n="step2_title">Detalle del Documento + Nueva Base</h2>
        <p data-i18n="step2_desc">Revisa la información y asigna la nueva base.</p>
      </div>
      <div class="row g-4">
        <div class="col-lg-6">
          <div class="info-card">
            <h3 data-i18n="document_info">Documento</h3>
            <div class="info-grid">
              <div>
                <label data-i18n="concatenarpuntoentrega">Punto Entrega</label>
                <p id="detallePunto"></p>
              </div>
              <div>
                <label data-i18n="concatenarnumrecibe">Recibe</label>
                <p id="detalleRecibe"></p>
              </div>
              <div>
                <label data-i18n="codigo_base_actual">Base Actual</label>
                <p id="detalleBase"></p>
              </div>
              <div>
                <label data-i18n="packing">Packing</label>
                <p id="detallePacking"></p>
              </div>
            </div>
          </div>

          <div class="info-card mt-4" id="mapCard" hidden>
            <h3 data-i18n="map_title">Ubicación (solo lectura)</h3>
            <div id="map" class="map"></div>
          </div>
        </div>
        <div class="col-lg-6">
          <div class="info-card">
            <h3 data-i18n="new_base">Nueva Base</h3>
            <div class="mb-3 position-relative">
              <label for="baseSearch" class="form-label" data-i18n="codigo_base_nueva">Código de base</label>
              <input type="text" class="form-control" id="baseSearch" autocomplete="off" />
              <div id="baseOptions" class="list-group position-absolute w-100 shadow-sm" hidden></div>
              <div class="form-text" data-i18n="typeahead_hint">Escribe para filtrar miles de registros.</div>
            </div>
            <div>
              <label for="baseNombre" class="form-label" data-i18n="nombre_base">Nombre</label>
              <input type="text" class="form-control" id="baseNombre" readonly />
            </div>
          </div>

          <div class="info-card mt-4">
            <h3 data-i18n="mov_contable">Detalle Contable</h3>
            <div class="table-responsive">
              <table class="table table-sm" id="movTable">
                <thead>
                  <tr>
                    <th data-i18n="nombre_producto">Producto</th>
                    <th data-i18n="cantidad">Cantidad</th>
                  </tr>
                </thead>
                <tbody></tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
      <div class="d-flex justify-content-between mt-4">
        <button class="btn btn-outline-light" id="step2Prev" data-i18n="prev">Anterior</button>
        <button class="btn btn-primary" id="step2Next" data-i18n="next">Siguiente</button>
      </div>
    </section>

    <section class="card-panel" data-step="3" hidden>
      <div class="card-header">
        <h2 data-i18n="step3_title">Confirmar Reasignación</h2>
        <p data-i18n="step3_desc">Verifica los datos antes de ejecutar la transacción.</p>
      </div>
      <div class="row g-4">
        <div class="col-lg-7">
          <div class="info-card">
            <h3 data-i18n="summary">Resumen</h3>
            <div id="summary" class="summary"></div>
          </div>
        </div>
        <div class="col-lg-5">
          <div class="info-card">
            <h3 data-i18n="auth">Autorización</h3>
            <label for="codigoUsuario" class="form-label" data-i18n="codigo_usuario">Código usuario</label>
            <input type="text" class="form-control" id="codigoUsuario" />
            <div class="form-text" data-i18n="user_hint">Requerido para el registro de auditoría.</div>
          </div>
          <div class="info-card mt-4">
            <h3 data-i18n="confirm">Confirmación</h3>
            <p class="mb-3" data-i18n="confirm_text">Esta acción es transaccional. Si falla algo, no se registrará nada.</p>
          </div>
        </div>
      </div>
      <div class="d-flex justify-content-between align-items-center mt-4">
        <div class="form-check">
          <input class="form-check-input" type="checkbox" id="confirmCheck" />
          <label class="form-check-label" for="confirmCheck">Confirmo que los datos son correctos.</label>
        </div>
        <button class="btn btn-danger" id="submitBtn" disabled>
          <span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true" hidden></span>
          <span data-i18n="reassign">Reasignar Base</span>
        </button>
      </div>
      <div class="d-flex justify-content-between mt-4">
        <button class="btn btn-outline-light" id="step3Prev" data-i18n="prev">Anterior</button>
      </div>
    </section>
  </main>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="app.js"></script>
</body>
</html>

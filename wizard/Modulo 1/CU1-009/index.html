<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>ERP | CU009 Anular Pedidos</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <main class="app-shell">
      <header class="app-header">
        <div class="brand">
          <div class="brand-mark">CU009</div>
          <div>
            <div class="brand-title" data-i18n="brandTitle">Anular Pedidos</div>
            <div class="brand-subtitle" data-i18n="brandSubtitle">Global IaaS + PaaS Order Lifecycle</div>
          </div>
        </div>
        <span id="connectionBadge" class="badge rounded-pill text-bg-secondary" data-i18n="statusConnecting">Conectando</span>
      </header>

      <section class="wizard-card">
        <div class="wizard-header">
          <div>
            <div class="section-title" data-i18n="wizardTitle">CU009 - M1AnularPedidos</div>
            <div class="section-subtitle" data-i18n="wizardSubtitle">Flujo transaccional para anular pedidos con saldo pendiente</div>
          </div>
          <div class="wizard-meta">
            <div>
              <div class="meta-label" data-i18n="metaAction">Accion</div>
              <div class="meta-value" data-i18n="metaActionValue">ANULAR PEDIDO</div>
            </div>
          </div>
        </div>

        <div class="progress" role="progressbar" aria-label="wizard progress">
          <div id="wizardProgress" class="progress-bar" style="width:33%"></div>
        </div>

        <div class="steps">
          <button type="button" class="step-chip active" data-step="1">1</button>
          <button type="button" class="step-chip" data-step="2">2</button>
          <button type="button" class="step-chip" data-step="3">3</button>
        </div>

        <div id="alertArea" class="alert d-none" role="alert"></div>

        <form id="wizardForm" novalidate>
          <section class="step-view" data-step="1">
            <div class="row g-3 align-items-end">
              <div class="col-md-6">
                <label class="form-label" for="vClienteFiltro" data-i18n="labelClienteFiltro">Filtrar por cliente</label>
                <div class="typeahead">
                  <input id="vClienteFiltro" class="form-control" type="text" autocomplete="off" data-i18n-placeholder="phClienteFiltro" placeholder="Nombre, numero o codigo" />
                  <div id="clienteMenu" class="typeahead-menu"></div>
                </div>
              </div>
              <div class="col-md-3">
                <label class="form-label" for="vFechaFiltro" data-i18n="labelFechaFiltro">Filtrar por fecha</label>
                <input id="vFechaFiltro" class="form-control" type="date" />
              </div>
              <div class="col-md-3 d-grid">
                <button id="reloadBtn" class="btn btn-outline-light" type="button" data-i18n="reload">Recargar</button>
              </div>
            </div>

            <div class="table-responsive mt-3">
              <table class="table table-dark table-borderless align-middle">
                <thead>
                  <tr>
                    <th class="text-center" data-i18n="thSelect">Sel</th>
                    <th data-i18n="thPedido">Pedido</th>
                    <th data-i18n="thCliente">Cliente</th>
                    <th data-i18n="thNumero">Numero</th>
                    <th data-i18n="thFecha">Fecha</th>
                  </tr>
                </thead>
                <tbody id="vPedidosPendientes"></tbody>
              </table>
            </div>
          </section>

          <section class="step-view d-none" data-step="2">
            <div class="summary-grid mb-3">
              <div class="summary-card">
                <div class="summary-line"><span data-i18n="summaryPedido">Pedido</span><span id="resPedido">-</span></div>
                <div class="summary-line"><span data-i18n="summaryCliente">Cliente</span><span id="resCliente">-</span></div>
                <div class="summary-line"><span data-i18n="summaryFecha">Fecha</span><span id="resFecha">-</span></div>
                <div class="summary-line"><span data-i18n="summaryPendiente">Total pendiente</span><span id="resTotalPendiente">0.00</span></div>
              </div>
            </div>

            <div class="table-responsive">
              <table class="table table-dark table-borderless align-middle">
                <thead>
                  <tr>
                    <th data-i18n="thProducto">Producto</th>
                    <th class="text-end" data-i18n="thSaldo">Saldo</th>
                    <th class="text-end" data-i18n="thPrecioUnitario">Precio unitario</th>
                    <th class="text-end" data-i18n="thPrecioTotal">Precio total</th>
                  </tr>
                </thead>
                <tbody id="vPedidoDetalle"></tbody>
              </table>
            </div>
          </section>

          <section class="step-view d-none" data-step="3">
            <div class="summary-card mb-3">
              <div class="summary-line"><span data-i18n="summaryPedido">Pedido</span><span id="confPedido">-</span></div>
              <div class="summary-line"><span data-i18n="summaryCliente">Cliente</span><span id="confCliente">-</span></div>
              <div class="summary-line"><span data-i18n="summaryFecha">Fecha</span><span id="confFecha">-</span></div>
              <div class="summary-line"><span data-i18n="summaryPendiente">Total pendiente</span><span id="confTotal">0.00</span></div>
            </div>
            <div class="form-check confirm-box">
              <input id="vConfirmarAnulacion" class="form-check-input" type="checkbox" />
              <label class="form-check-label" for="vConfirmarAnulacion" data-i18n="confirmLabel">
                Confirmo que deseo anular el pedido seleccionado.
              </label>
            </div>
          </section>

          <div class="wizard-actions">
            <button id="prevBtn" type="button" class="btn btn-outline-light" data-i18n="prev">Anterior</button>
            <button id="nextBtn" type="button" class="btn btn-primary" data-i18n="next">Siguiente</button>
            <button id="anularBtn" type="button" class="btn btn-danger d-none" data-i18n="cancelOrder">Anular Pedido</button>
          </div>
        </form>
      </section>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="app.js"></script>
  </body>
</html>
